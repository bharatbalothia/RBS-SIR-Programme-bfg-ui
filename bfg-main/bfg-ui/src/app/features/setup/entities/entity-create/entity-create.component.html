<mat-card class="entity-create-card">
    <mat-card-header>
        <mat-card-title>Create Entity</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
        <mat-horizontal-stepper #stepper [linear]="isLinear">
            <mat-step [stepControl]="entityTypeFormGroup">
                <form [formGroup]="entityTypeFormGroup">
                    <ng-template matStepLabel>Choose entity type</ng-template>
                    <mat-form-field>
                        <mat-label>Entity type</mat-label>
                        <mat-select formControlName="service" required>
                            <mat-option value="GPL">GPL</mat-option>
                            <mat-option value="SCT">SCT</mat-option>
                        </mat-select>
                        <mat-error *ngFor="let validation of validationMessages.service">
                            <mat-error class="error-message" *ngIf="entityTypeFormGroup.get('service').hasError(validation.type)
                                && (entityTypeFormGroup.get('service').dirty
                                || entityTypeFormGroup.get('service').touched)">
                                {{validation.message}}</mat-error>
                        </mat-error>
                    </mat-form-field>
                    <div class='stepper-actions'>
                        <button mat-raised-button matStepperNext class="action-button">Next</button>
                    </div>
                </form>
            </mat-step>
            <mat-step [stepControl]="entityPageFormGroup">
                <form [formGroup]="entityPageFormGroup">
                    <ng-template matStepLabel>Fill entity page</ng-template>
                    <mat-form-field>
                        <mat-label>Entity</mat-label>
                        <input matInput formControlName="entity" required>
                        <mat-error *ngFor="let validation of validationMessages.entity">
                            <mat-error class="error-message" *ngIf="entityPageFormGroup.get('entity').hasError(validation.type)
                                && (entityPageFormGroup.get('entity').dirty
                                || entityPageFormGroup.get('entity').touched)">
                                {{validation.message}}</mat-error>
                        </mat-error>
                    </mat-form-field>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Route Inbound:</label>
                        <mat-radio-group formControlName='routeInbound'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Inbound Requestor DN</mat-label>
                            <input matInput formControlName="inboundRequestorDN" required>
                            <mat-error *ngFor="let validation of validationMessages.inboundRequestorDN">
                                <mat-error class="error-message" *ngIf="entityPageFormGroup.get('inboundRequestorDN').hasError(validation.type)
                                    && (entityPageFormGroup.get('inboundRequestorDN').dirty
                                    || entityPageFormGroup.get('inboundRequestorDN').touched)">
                                    {{validation.message}}</mat-error>
                            </mat-error>
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Inbound Responder DN</mat-label>
                            <input matInput formControlName="inboundResponderDN" required>
                            <mat-error *ngFor="let validation of validationMessages.inboundResponderDN">
                                <mat-error class="error-message" *ngIf="entityPageFormGroup.get('inboundResponderDN').hasError(validation.type)
                                    && (entityPageFormGroup.get('inboundResponderDN').dirty
                                    || entityPageFormGroup.get('inboundResponderDN').touched)">
                                    {{validation.message}}</mat-error>
                            </mat-error>
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Inbound Service</mat-label>
                            <input matInput formControlName="inboundService" required>
                            <mat-error *ngFor="let validation of validationMessages.inboundService">
                                <mat-error class="error-message" *ngIf="entityPageFormGroup.get('inboundService').hasError(validation.type)
                                    && (entityPageFormGroup.get('inboundService').dirty
                                    || entityPageFormGroup.get('inboundService').touched)">
                                    {{validation.message}}</mat-error>
                            </mat-error>
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Inbound Request Type</mat-label>
                            <mat-select formControlName="inboundRequestType" multiple>
                                <mat-select-trigger>
                                    <mat-chip-list>
                                        <mat-chip
                                            *ngFor="let inboundRequestType of entityPageFormGroup.get('inboundRequestType').value"
                                            [removable]="true"
                                            (removed)="onInboundRequestTypeRemoved(inboundRequestType)">
                                            {{ inboundRequestType }}
                                            <mat-icon matChipRemove>cancel</mat-icon>
                                        </mat-chip>
                                    </mat-chip-list>
                                </mat-select-trigger>
                                <mat-option *ngFor="let inboundRequestType of inboundRequestTypeList"
                                    [value]="inboundRequestType">{{inboundRequestType}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Inbound Directory:</label>
                        <mat-radio-group formControlName='inboundDir'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Inbound Routing Rule:</label>
                        <mat-radio-group formControlName='inboundRoutingRule'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <div class='stepper-actions'>
                        <button mat-raised-button matStepperPrevious class="action-button">Back</button>
                        <button mat-raised-button matStepperNext class="action-button">Next</button>
                        <button mat-raised-button class="action-button" color='warn' (click)="cancelCreationEntity()">
                            Cancel</button>
                    </div>
                </form>
            </mat-step>
            <mat-step [stepControl]="SWIFTDetailsFormGroup">
                <form [formGroup]="SWIFTDetailsFormGroup">
                    <ng-template matStepLabel>Fill SWIFT details</ng-template>
                    <section>
                        <mat-form-field>
                            <mat-label>Requestor DN</mat-label>
                            <input matInput formControlName="requestorDN" required>
                            <mat-error *ngFor="let validation of validationMessages.requestorDN">
                                <mat-error class="error-message" *ngIf="SWIFTDetailsFormGroup.get('requestorDN').hasError(validation.type)
                                    && (SWIFTDetailsFormGroup.get('requestorDN').dirty
                                    || SWIFTDetailsFormGroup.get('requestorDN').touched)">
                                    {{validation.message}}</mat-error>
                            </mat-error>
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Responder DN</mat-label>
                            <input matInput formControlName="responderDN" required>
                            <mat-error *ngFor="let validation of validationMessages.responderDN">
                                <mat-error class="error-message" *ngIf="SWIFTDetailsFormGroup.get('responderDN').hasError(validation.type)
                                    && (SWIFTDetailsFormGroup.get('responderDN').dirty
                                    || SWIFTDetailsFormGroup.get('responderDN').touched)">
                                    {{validation.message}}</mat-error>
                            </mat-error>
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Request Type</mat-label>
                            <input matInput formControlName="requestType">
                        </mat-form-field>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Trace:</label>
                        <mat-radio-group formControlName='trace'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>SnF:</label>
                        <mat-radio-group formControlName='snF'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Delivery Notification:</label>
                        <mat-radio-group formControlName='deliveryNotification'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>Non-Repudiation:</label>
                        <mat-radio-group formControlName='nonRepudiation'>
                            <mat-radio-button [value]="true">Yes</mat-radio-button>
                            <mat-radio-button [value]="false">No</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section class='radio-group-section'>
                        <label class='radio-group-label'>End to End Signing:</label>
                        <mat-radio-group formControlName='e2eSigning'>
                            <mat-radio-button value="None">None</mat-radio-button>
                            <mat-radio-button value="Crypto">Crypto</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Delivery Notification DN</mat-label>
                            <input matInput formControlName="deliveryNotifDN">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Delivery Notification RT</mat-label>
                            <input matInput formControlName="deliveryNotifRT">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Request Reference</mat-label>
                            <input matInput formControlName="requestRef">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>File Info</mat-label>
                            <input matInput formControlName="fileInfo">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>File Description</mat-label>
                            <input matInput formControlName="fileDesc">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Transfer Info</mat-label>
                            <input matInput formControlName="transferInfo">
                        </mat-form-field>
                    </section>
                    <section>
                        <mat-form-field>
                            <mat-label>Transfer Description</mat-label>
                            <input matInput formControlName="transferDesc">
                        </mat-form-field>
                    </section>
                    <div class='stepper-actions'>
                        <button mat-raised-button matStepperPrevious class="action-button">Back</button>
                        <button mat-raised-button matStepperNext class="action-button">Next</button>
                        <button mat-raised-button class="action-button" color='warn' (click)="cancelCreationEntity()">
                            Cancel</button>
                    </div>
                </form>
            </mat-step>
            <mat-step [stepControl]="summaryPageFormGroup">
                <form [formGroup]="summaryPageFormGroup">
                    <ng-template matStepLabel>Fill summary page</ng-template>
                    <mat-form-field>
                        <mat-label>Changer comments</mat-label>
                        <textarea matInput formControlName="changerComments"></textarea>
                    </mat-form-field>
                    <div class='stepper-actions'>
                        <button mat-raised-button matStepperPrevious class="action-button">Back</button>
                        <button mat-raised-button matStepperNext class="action-button">Next</button>
                        <button mat-raised-button class="action-button" color='warn' (click)="cancelCreationEntity()">
                            Cancel</button>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>Done</ng-template>
                <p>You are now done.</p>
                <div class='stepper-actions'>
                    <button mat-raised-button matStepperPrevious class="action-button">Back</button>
                    <button mat-raised-button class="action-button" color='primary'
                        (click)="createEntity()">Create</button>
                    <button mat-raised-button class="action-button" color='warn' (click)="cancelCreationEntity()">
                        Cancel</button>
                </div>
            </mat-step>
        </mat-horizontal-stepper>
    </mat-card-content>
</mat-card>